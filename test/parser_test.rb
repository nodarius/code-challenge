require_relative '../lib/parser'

describe Parser do
  filepath = "./files/dali-paintings.html"

  parser = Parser.new File.read(filepath)
  result = parser.parse

  it "returns hashmap" do
    expect(result.class.to_s).to eq "Hash"
  end

  it "has key named 'artworks'" do
    expect(result["artworks"]).not_to eq nil
  end

  it "has artworks type = array" do
    expect(result["artworks"].class.to_s).to eq "Array"
  end

  it "returns correct number of results (48)" do 
    expect(result["artworks"].length).to eq 48
  end

  it "correctly parses the artwork" do
    artwork = result["artworks"][1]
    expect(artwork["name"]).to eq "The Great Masturbator"
    expect(artwork["extensions"][0]).to eq '1929'
    expect(artwork["link"]).to eq 'https://www.google.com/search?q=The+Great+Masturbator&stick=H4sIAAAAAAAAAONgFuLQz9U3sIyvyFPiBLFMkw0tjbWUspOt9Msyi0sTc-ITi0qQmJnFJVbl-UXZxY8YY7kFXv64JywVMmnNyWuMflxEaBJS4WJzzSvJLKkUkuLikYLbrcEgxcUF51kxaTDxLGIVDclIVXAvSk0sUfBNLC4pLUpKLMkvAgBN2-z_swAAAA&npsic=0&sa=X&ved=0ahUKEwjWwZ7J9ITlAhWCpIsKHRYOCkgQ-BYINTAm'
    expect(artwork["image"]).to eq 'data:image/jpeg;base64,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'
  end


end
